"use strict";exports.id=272,exports.ids=[272],exports.modules={5272:(e,t,s)=>{let i,n;s.r(t),s.d(t,{createOrReadKeyless:()=>X,removeKeyless:()=>Z,safeParseClerkFile:()=>G});var a,r,l,c,o,d,h,u,p,f,y,k,m,g,w,b,v,K,E,x,S=s(7499);s(4996),s(3226),s(1383);var M=s(3e3),T=s(9827),O=s(9948),C=class{constructor(){(0,O.Ko)(this,c),(0,O.Ko)(this,r,"clerk_telemetry_throttler"),(0,O.Ko)(this,l,864e5)}isEventThrottled(e){if(!(0,O.ac)(this,c,h))return!1;let t=Date.now(),s=(0,O.U9)(this,c,o).call(this,e),i=O.ac(this,c,d)?.[s];if(!i){let e={...(0,O.ac)(this,c,d),[s]:t};localStorage.setItem((0,O.ac)(this,r),JSON.stringify(e))}if(i&&t-i>(0,O.ac)(this,l)){let e=(0,O.ac)(this,c,d);delete e[s],localStorage.setItem((0,O.ac)(this,r),JSON.stringify(e))}return!!i}};r=new WeakMap,l=new WeakMap,c=new WeakSet,o=function(e){let{sk:t,pk:s,payload:i,...n}=e,a={...i,...n};return JSON.stringify(Object.keys({...i,...n}).sort().map(e=>a[e]))},d=function(){let e=localStorage.getItem((0,O.ac)(this,r));return e?JSON.parse(e):{}},h=function(){if("undefined"==typeof window)return!1;let e=window.localStorage;if(!e)return!1;try{let t="test";return e.setItem(t,t),e.removeItem(t),!0}catch(t){return t instanceof DOMException&&("QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e.length>0&&e.removeItem((0,O.ac)(this,r)),!1}};var R={samplingRate:1,maxBufferSize:5,endpoint:"https://clerk-telemetry.com"},U=class{constructor(e){(0,O.Ko)(this,m),(0,O.Ko)(this,u),(0,O.Ko)(this,p),(0,O.Ko)(this,f,{}),(0,O.Ko)(this,y,[]),(0,O.Ko)(this,k),(0,O.qx)(this,u,{maxBufferSize:e.maxBufferSize??R.maxBufferSize,samplingRate:e.samplingRate??R.samplingRate,disabled:e.disabled??!1,debug:e.debug??!1,endpoint:R.endpoint}),e.clerkVersion||"undefined"!=typeof window?(0,O.ac)(this,f).clerkVersion=e.clerkVersion??"":(0,O.ac)(this,f).clerkVersion="",(0,O.ac)(this,f).sdk=e.sdk,(0,O.ac)(this,f).sdkVersion=e.sdkVersion,(0,O.ac)(this,f).publishableKey=e.publishableKey??"";let t=(0,T.nQ)(e.publishableKey);t&&((0,O.ac)(this,f).instanceType=t.instanceType),e.secretKey&&((0,O.ac)(this,f).secretKey=e.secretKey.substring(0,16)),(0,O.qx)(this,p,new C)}get isEnabled(){return!("development"!==(0,O.ac)(this,f).instanceType||(0,O.ac)(this,u).disabled||"undefined"!=typeof process&&(0,M.fQ)(process.env.CLERK_TELEMETRY_DISABLED)||"undefined"!=typeof window&&window?.navigator?.webdriver)}get isDebug(){return(0,O.ac)(this,u).debug||"undefined"!=typeof process&&(0,M.fQ)(process.env.CLERK_TELEMETRY_DEBUG)}record(e){let t=(0,O.U9)(this,m,x).call(this,e.event,e.payload);(0,O.U9)(this,m,K).call(this,t.event,t),(0,O.U9)(this,m,g).call(this,t,e.eventSamplingRate)&&((0,O.ac)(this,y).push(t),(0,O.U9)(this,m,b).call(this))}};u=new WeakMap,p=new WeakMap,f=new WeakMap,y=new WeakMap,k=new WeakMap,m=new WeakSet,g=function(e,t){return this.isEnabled&&!this.isDebug&&(0,O.U9)(this,m,w).call(this,e,t)},w=function(e,t){let s=Math.random();return s<=(0,O.ac)(this,u).samplingRate&&(void 0===t||s<=t)&&!(0,O.ac)(this,p).isEventThrottled(e)},b=function(){if("undefined"==typeof window){(0,O.U9)(this,m,v).call(this);return}if((0,O.ac)(this,y).length>=(0,O.ac)(this,u).maxBufferSize){(0,O.ac)(this,k)&&("undefined"!=typeof cancelIdleCallback?cancelIdleCallback:clearTimeout)((0,O.ac)(this,k)),(0,O.U9)(this,m,v).call(this);return}(0,O.ac)(this,k)||("requestIdleCallback"in window?(0,O.qx)(this,k,requestIdleCallback(()=>{(0,O.U9)(this,m,v).call(this)})):(0,O.qx)(this,k,setTimeout(()=>{(0,O.U9)(this,m,v).call(this)},0)))},v=function(){fetch(new URL("/v1/event",(0,O.ac)(this,u).endpoint),{method:"POST",body:JSON.stringify({events:(0,O.ac)(this,y)}),headers:{"Content-Type":"application/json"}}).catch(()=>void 0).then(()=>{(0,O.qx)(this,y,[])}).catch(()=>void 0)},K=function(e,t){this.isDebug&&(void 0!==console.groupCollapsed?(console.groupCollapsed("[clerk/telemetry]",e),console.log(t),console.groupEnd()):console.log("[clerk/telemetry]",e,t))},E=function(){let e={name:(0,O.ac)(this,f).sdk,version:(0,O.ac)(this,f).sdkVersion};return"undefined"!=typeof window&&window.Clerk&&(e={...e,...window.Clerk.constructor.sdkMetadata}),e},x=function(e,t){let s=(0,O.U9)(this,m,E).call(this);return{event:e,cv:(0,O.ac)(this,f).clerkVersion??"",it:(0,O.ac)(this,f).instanceType??"",sdk:s.name,sdkv:s.version,...(0,O.ac)(this,f).publishableKey?{pk:(0,O.ac)(this,f).publishableKey}:{},...(0,O.ac)(this,f).secretKey?{sk:(0,O.ac)(this,f).secretKey}:{},payload:t}},a=S.WX,async(...e)=>{let{data:t,errors:s}=await a(...e);if(s)throw s[0];return t};var _=s(507);let D={secretKey:_.Cn,publishableKey:_.Am,apiUrl:_.T5,apiVersion:_.Gn,userAgent:"@clerk/nextjs@6.20.2",proxyUrl:_.NM,domain:_.yK,isSatellite:_.lo,sdkMetadata:_.nE,telemetry:{disabled:_.CY,debug:_.w4}},I=e=>(function(e){let t={...e},s=(0,S.gf)(t),i=(0,S.sA)({options:t,apiClient:s}),n=new U({...e.telemetry,publishableKey:t.publishableKey,secretKey:t.secretKey,samplingRate:.1,...t.sdkMetadata?{sdk:t.sdkMetadata.name,sdkVersion:t.sdkMetadata.version}:{}});return{...s,...i,telemetry:n}})({...D,...e});var A=Object.getOwnPropertyNames;let N=(i={"src/runtime/node/safe-node-apis.js"(e,t){let{existsSync:i,writeFileSync:n,readFileSync:a,appendFileSync:r,mkdirSync:l,rmSync:c}=s(7561),o=s(9411);t.exports={fs:{existsSync:i,writeFileSync:n,readFileSync:a,appendFileSync:r,mkdirSync:l,rmSync:c},path:o,cwd:()=>process.cwd()}}},function(){return n||(0,i[A(i)[0]])((n={exports:{}}).exports,n),n.exports})(),V=e=>{throw Error(`Clerk: ${e} is missing. This is an internal error. Please contact Clerk's support.`)},W=()=>(N.fs||V("fs"),N.fs),j=()=>(N.path||V("path"),N.path),q=()=>(N.cwd||V("cwd"),N.cwd),B=".clerk",J="clerk.lock",L=(...e)=>{let t=j(),s=q();return t.join(s(),B,...e)},z=".tmp",P=()=>L(z,"keyless.json"),Q=()=>L(z,"README.md"),Y=!1;function G(){let{readFileSync:e}=W();try{let t;let s=P();try{t=e(s,{encoding:"utf-8"})||"{}"}catch{t="{}"}return JSON.parse(t)}catch{return}}let $=()=>{let{writeFileSync:e}=W();Y=!0,e(J,"This file can be deleted. Please delete this file and refresh your application",{encoding:"utf8",mode:"0777",flag:"w"})},F=()=>{let{rmSync:e}=W();try{e(J,{force:!0,recursive:!0})}catch{}Y=!1},H=()=>{let{existsSync:e}=W();return Y||e(J)};async function X(){let{writeFileSync:e,mkdirSync:t}=W();if(H())return null;$();let s=P(),i=Q();t(L(z),{recursive:!0}),function(){let{existsSync:e,writeFileSync:t,readFileSync:s,appendFileSync:i}=W(),n=j(),a=q(),r=n.join(a(),".gitignore");e(r)||t(r,""),s(r,"utf-8").includes(B+"/")||i(r,`
# clerk configuration (can include secrets)
/${B}/
`)}();let n=G();if((null==n?void 0:n.publishableKey)&&(null==n?void 0:n.secretKey))return F(),n;let a=I({}),r=await a.__experimental_accountlessApplications.createAccountlessApplication().catch(()=>null);return r&&(e(s,JSON.stringify(r),{encoding:"utf8",mode:"0777",flag:"w"}),e(i,`
## DO NOT COMMIT
This directory is auto-generated from \`@clerk/nextjs\` because you are running in Keyless mode. Avoid committing the \`.clerk/\` directory as it includes the secret key of the unclaimed instance.
  `,{encoding:"utf8",mode:"0777",flag:"w"})),F(),r}function Z(){let{rmSync:e}=W();if(!H()){$();try{e(L(),{force:!0,recursive:!0})}catch{}F()}}}};